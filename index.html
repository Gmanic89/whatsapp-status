<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FortunaWild - Contacto</title>
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-RJWDV50N7N"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-RJWDV50N7N');
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #075e54;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            text-align: center;
            max-width: 400px;
            width: 100%;
        }

        .logo {
            font-size: 80px;
            margin-bottom: 20px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        h1 {
            color: white;
            font-size: 32px;
            margin-bottom: 40px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .button-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .contact-button {
            padding: 20px 40px;
            font-size: 20px;
            font-weight: 600;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .whatsapp-button {
            background: #25d366;
            color: white;
        }

        .whatsapp-button:hover {
            background: #20bd5a;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(37, 211, 102, 0.4);
        }

        .telegram-button {
            background: #0088cc;
            color: white;
        }

        .telegram-button:hover {
            background: #0077b3;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 136, 204, 0.4);
        }

        .button-icon {
            font-size: 28px;
        }

        .info-text {
            color: white;
            margin-top: 30px;
            font-size: 14px;
            opacity: 0.8;
        }

        /* Loading overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .loading-overlay.show {
            display: flex;
        }

        .loading-content {
            text-align: center;
            color: white;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            margin: 0 auto 20px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 26px;
            }

            .contact-button {
                padding: 18px 30px;
                font-size: 18px;
            }

            .logo {
                font-size: 60px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo">üé∞</div>
        <h1>FortunaWild</h1>
        
        <div class="button-container">
            <button class="contact-button whatsapp-button" id="whatsappBtn">
                <span class="button-icon">üí¨</span>
                <span>Ir a WhatsApp</span>
            </button>
            
            <button class="contact-button telegram-button" id="telegramBtn">
                <span class="button-icon">‚úàÔ∏è</span>
                <span>Ir a Telegram</span>
            </button>
        </div>
        
        <p class="info-text">Elige tu m√©todo de contacto preferido</p>
    </div>

    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="spinner"></div>
            <p>Conectando...</p>
        </div>
    </div>

    <script>
        function d(s) {
            return atob(s);
        }

        // N√∫meros de WhatsApp encriptados
        const enc = {
            l1: d('NTQ5') + d('MjIxNTc3NzA0Ng=='),
            l2: d('NTQ5') + d('MTE3MzU4ODkxOA=='),
            l3: d('NTQ5') + d('MTE3MzY2MTY3NQ=='),
            l4: d('NTQ5') + d('MTE3MzU3NTY5Mg=='),
            l5: d('NTQ5') + d('MTE2NTU1NDg5MQ=='),
            l6: d('NTQ5') + d('MTE3MTgwMjIyMA=='),
            l7: d('NTQ5') + d('MTEzNTExMTM3OA=='),
            l8: d('NTQ5') + d('MjIxNDQwNzM3MQ=='),
            l9: d('NTQ5') + d('MTE2MjQ3NTU2NQ=='),
            l10: d('NTQ5') + d('MTE3MzU3NTY5Mg=='),
            l11: d('NTQ5') + d('MTE3MTA5NTM1NA=='),
            telegram: d('Zm9ydHVuYXdpbGQwMQ==')
        };

        // Configuraci√≥n de l√≠neas activas
        const activeLines = [
            { name: 'Fortuna Wild 2', number: enc.l2 },
            { name: 'Fortuna Wild 3', number: enc.l3 },
            { name: 'Fortuna Wild 4', number: enc.l4 },
            { name: 'Fortuna Wild 5', number: enc.l5 },
            { name: 'Fortuna Wild 6', number: enc.l6 },
            { name: 'Fortuna Wild 7', number: enc.l7 },
            { name: 'Fortuna Wild 8', number: enc.l8 },
            { name: 'Fortuna Wild 9', number: enc.l9 },
            { name: 'Fortuna Wild 10', number: enc.l10 },
            { name: 'Soporte T√©cnico', number: enc.l11 }
        ];

        // Funci√≥n para seleccionar l√≠nea aleatoria
        function getRandomLine() {
            const randomIndex = Math.floor(Math.random() * activeLines.length);
            return activeLines[randomIndex];
        }

        // Funci√≥n para diversificar URLs de WhatsApp
        function getRandomWhatsAppURL(phone, message) {
            const encodedMessage = encodeURIComponent(message);
            const formats = [
                `https://wa.me/${phone}?text=${encodedMessage}`,
                `https://api.whatsapp.com/send?phone=${phone}&text=${encodedMessage}`,
                `https://api.whatsapp.com/send/?phone=${phone}&text=${encodedMessage}&app_absent=0`
            ];
            return formats[Math.floor(Math.random() * formats.length)];
        }

        // Rate limiting con l√≠mite de 3 clicks totales que se resetea cada 30 minutos
        function canUserClick() {
            const now = Date.now();
            const lastClick = localStorage.getItem('last_fortunawild_click');
            const firstClickTime = localStorage.getItem('fortunawild_first_click_time');
            const totalClicks = parseInt(localStorage.getItem('fortunawild_total_clicks') || '0');
            
            // Verificar si han pasado 30 minutos desde el primer click
            if (firstClickTime) {
                const timeElapsed = now - parseInt(firstClickTime);
                const thirtyMinutes = 30 * 60 * 1000; // 30 minutos en milisegundos
                
                if (timeElapsed >= thirtyMinutes) {
                    // Resetear el contador despu√©s de 30 minutos
                    console.log('30 minutos transcurridos, reseteando contador');
                    localStorage.removeItem('fortunawild_total_clicks');
                    localStorage.removeItem('fortunawild_first_click_time');
                    localStorage.removeItem('last_fortunawild_click');
                    
                    // Recargar la p√°gina para actualizar la UI
                    location.reload();
                    return { allowed: false, reason: 'reload' };
                }
            }
            
            // Verificar clicks muy r√°pidos (menos de 3 segundos)
            if (lastClick && now - parseInt(lastClick) < 3000) {
                return { allowed: false, reason: 'fast', message: 'Por favor espera unos segundos antes de intentar nuevamente' };
            }
            
            // Verificar l√≠mite de 3 clicks totales
            if (totalClicks >= 3) {
                // Calcular tiempo restante
                const timeElapsed = now - parseInt(firstClickTime);
                const thirtyMinutes = 30 * 60 * 1000;
                const timeRemaining = thirtyMinutes - timeElapsed;
                const minutesRemaining = Math.ceil(timeRemaining / 60000);
                
                return { 
                    allowed: false, 
                    reason: 'limit', 
                    message: `Has alcanzado el l√≠mite de 3 intentos. Podr√°s intentar nuevamente en ${minutesRemaining} minutos.` 
                };
            }
            
            // Si es el primer click, guardar el timestamp
            if (totalClicks === 0) {
                localStorage.setItem('fortunawild_first_click_time', now.toString());
            }
            
            // Incrementar contador y guardar timestamp
            const newTotal = totalClicks + 1;
            localStorage.setItem('fortunawild_total_clicks', newTotal.toString());
            localStorage.setItem('last_fortunawild_click', now.toString());
            
            return { allowed: true, remaining: 3 - newTotal };
        }

        // Evento WhatsApp
        document.getElementById('whatsappBtn').onclick = function() {
            const clickCheck = canUserClick();
            
            if (!clickCheck.allowed) {
                alert(clickCheck.message);
                
                // Si alcanz√≥ el l√≠mite, deshabilitar botones visualmente
                if (clickCheck.reason === 'limit') {
                    document.getElementById('whatsappBtn').style.opacity = '0.5';
                    document.getElementById('whatsappBtn').style.cursor = 'not-allowed';
                    document.getElementById('telegramBtn').style.opacity = '0.5';
                    document.getElementById('telegramBtn').style.cursor = 'not-allowed';
                }
                return;
            }

            // Mostrar clicks restantes
            if (clickCheck.remaining !== undefined && clickCheck.remaining > 0) {
                console.log(`Te quedan ${clickCheck.remaining} intentos`);
            }

            // Mostrar loading
            document.getElementById('loadingOverlay').classList.add('show');

            // Seleccionar l√≠nea aleatoria
            const selectedLine = getRandomLine();
            
            // Tracking
            if (typeof gtag !== 'undefined') {
                gtag('event', 'whatsapp_random_click', {
                    event_category: 'engagement',
                    event_label: selectedLine.name
                });
            }

            // Mensaje inicial
            const initialMessage = `Hola ${selectedLine.name}, necesito informaci√≥n`;
            
            // Generar URL con formato aleatorio
            const waUrl = getRandomWhatsAppURL(selectedLine.number, initialMessage);

            // Redirigir despu√©s de un breve delay
            setTimeout(() => {
                window.location.href = waUrl;
                
                // Ocultar loading despu√©s de la redirecci√≥n
                setTimeout(() => {
                    document.getElementById('loadingOverlay').classList.remove('show');
                }, 2000);
            }, 800);
        };

        // Evento Telegram
        document.getElementById('telegramBtn').onclick = function() {
            const clickCheck = canUserClick();
            
            if (!clickCheck.allowed) {
                alert(clickCheck.message);
                
                // Si alcanz√≥ el l√≠mite, deshabilitar botones visualmente
                if (clickCheck.reason === 'limit') {
                    document.getElementById('whatsappBtn').style.opacity = '0.5';
                    document.getElementById('whatsappBtn').style.cursor = 'not-allowed';
                    document.getElementById('telegramBtn').style.opacity = '0.5';
                    document.getElementById('telegramBtn').style.cursor = 'not-allowed';
                }
                return;
            }

            // Mostrar clicks restantes
            if (clickCheck.remaining !== undefined && clickCheck.remaining > 0) {
                console.log(`Te quedan ${clickCheck.remaining} intentos`);
            }

            // Mostrar loading
            document.getElementById('loadingOverlay').classList.add('show');

            // Tracking
            if (typeof gtag !== 'undefined') {
                gtag('event', 'telegram_click', {
                    event_category: 'engagement',
                    event_label: 'FortunaWild Telegram'
                });
            }

            // Redirigir a Telegram
            setTimeout(() => {
                window.location.href = 'https://t.me/' + enc.telegram;
                
                setTimeout(() => {
                    document.getElementById('loadingOverlay').classList.remove('show');
                }, 2000);
            }, 800);
        };

        // Tracking de visita
        if (typeof gtag !== 'undefined') {
            gtag('event', 'page_view', {
                event_category: 'engagement',
                event_label: 'fortunawild_simple',
                page_title: 'FortunaWild Simple Contact'
            });
        }

        // Verificar si ya alcanz√≥ el l√≠mite al cargar la p√°gina
        window.onload = function() {
            const now = Date.now();
            const totalClicks = parseInt(localStorage.getItem('fortunawild_total_clicks') || '0');
            const firstClickTime = localStorage.getItem('fortunawild_first_click_time');
            
            // Verificar si han pasado 30 minutos
            if (firstClickTime) {
                const timeElapsed = now - parseInt(firstClickTime);
                const thirtyMinutes = 30 * 60 * 1000;
                
                if (timeElapsed >= thirtyMinutes && totalClicks > 0) {
                    // Resetear autom√°ticamente
                    localStorage.removeItem('fortunawild_total_clicks');
                    localStorage.removeItem('fortunawild_first_click_time');
                    localStorage.removeItem('last_fortunawild_click');
                    console.log('L√≠mite reseteado autom√°ticamente');
                }
            }
            
            // Verificar l√≠mite actual
            const currentClicks = parseInt(localStorage.getItem('fortunawild_total_clicks') || '0');
            
            if (currentClicks >= 3) {
                const firstClick = localStorage.getItem('fortunawild_first_click_time');
                if (firstClick) {
                    const timeElapsed = now - parseInt(firstClick);
                    const thirtyMinutes = 30 * 60 * 1000;
                    const timeRemaining = thirtyMinutes - timeElapsed;
                    const minutesRemaining = Math.ceil(timeRemaining / 60000);
                    
                    document.getElementById('whatsappBtn').style.opacity = '0.5';
                    document.getElementById('whatsappBtn').style.cursor = 'not-allowed';
                    document.getElementById('telegramBtn').style.opacity = '0.5';
                    document.getElementById('telegramBtn').style.cursor = 'not-allowed';
                    
                    document.querySelector('.info-text').textContent = `‚è±Ô∏è L√≠mite alcanzado. Espera ${minutesRemaining} minutos`;
                    document.querySelector('.info-text').style.color = '#ffeb3b';
                }
            }
        };
    </script>
</body>
</html>